import{a as L,b as $}from"./chunk-NNKGLV2N.js";import{a as _}from"./chunk-5OTHEGTE.js";import{b as G}from"./chunk-Y6S55E2H.js";import{A as E,C as d,E as k,F as f,G as M,J as w,K as O,L as N,M as I,N as R,P as g,R as T,S as J,V as D}from"./chunk-JLTUO4KB.js";import{h as j,ia as F,j as y}from"./chunk-UJ6Z2YWZ.js";import"./chunk-6XXA7HXI.js";import{Bb as s,Gb as b,Hb as U,Jb as A,Kb as V,Lb as r,Mb as o,Nb as p,Ub as C,Wb as x,Zb as q,gb as a,gc as m,hb as B,hc as S,ic as P,ma as l,oc as c,qa as u,xb as h}from"./chunk-HA5XFI4U.js";var K=(()=>{class t{constructor(){this.fb=l(R),this.accountService=l(G),this.router=l(y),this.activatedRoute=l(j),this.returnUrl="/shop",this.loginForm=this.fb.group({email:[""],password:[""]});let e=this.activatedRoute.snapshot.queryParams.returnUrl;e&&(this.returnUrl=e)}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-login"]],standalone:!0,features:[c],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(i,n){i&1&&(r(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return n.onSubmit()}),r(2,"div",2)(3,"h1",3),m(4,"Login"),o()(),r(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email address"),o(),p(8,"input",5),o(),r(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),o(),p(12,"input",6),o(),r(13,"button",7),m(14,"Sign in"),o()()()),i&2&&(a(),s("formGroup",n.loginForm))},dependencies:[g,w,E,f,M,N,I,_,D,L,T,F]})}}return t})();function Y(t,v){if(t&1&&(r(0,"mat-error"),m(1),o()),t&2){let e=x();a(),P("",e.label," is required")}}function Z(t,v){t&1&&(r(0,"mat-error"),m(1,"Email is invalid"),o())}var Q=(()=>{class t{constructor(e){this.controlDir=e,this.label="",this.type="text",this.controlDir.valueAccessor=this}writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.controlDir.control}static{this.\u0275fac=function(i){return new(i||t)(B(k,2))}}static{this.\u0275cmp=u({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[c],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(i,n){i&1&&(r(0,"mat-form-field",0)(1,"mat-label"),m(2),o(),p(3,"input",1),h(4,Y,2,1,"mat-error")(5,Z,2,0,"mat-error"),o()),i&2&&(a(2),S(n.label),a(),q("type",n.type),q("placeholder",n.label),s("formControl",n.control),a(),b(n.control.hasError("required")?4:-1),a(),b(n.control.hasError("email")?5:-1))},dependencies:[g,E,f,O,D,L,J,T]})}}return t})();function tt(t,v){if(t&1&&(r(0,"li"),m(1),o()),t&2){let e=v.$implicit;a(),S(e)}}function et(t,v){if(t&1&&(r(0,"div",8)(1,"ul",10),A(2,tt,2,1,"li",null,U),o()()),t&2){let e=x();a(2),V(e.validationErrors)}}var W=(()=>{class t{constructor(){this.fb=l(R),this.accountService=l(G),this.router=l(y),this.snack=l($),this.registerForm=this.fb.group({firstName:["",d.required],lastName:["",d.required],email:["",[d.required,d.email]],password:["",d.required]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:e=>this.validationErrors=e})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-register"]],standalone:!0,features:[c],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(i,n){i&1&&(r(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return n.onSubmit()}),r(2,"div",2)(3,"h1",3),m(4,"Register"),o()(),p(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),h(9,et,4,0,"div",8),r(10,"button",9),m(11,"Register"),o()()()),i&2&&(a(),s("formGroup",n.registerForm),a(8),b(n.validationErrors?9:-1),a(),s("disabled",n.registerForm.invalid))},dependencies:[g,w,f,M,N,I,_,F,Q]})}}return t})();var Nt=[{path:"login",component:K},{path:"register",component:W}];export{Nt as accountRoutes};
